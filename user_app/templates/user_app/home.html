{% extends 'user_app/base.html' %}

{% block title %}FarmEase - Connecting Farmers with Processors{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-3">Welcome to FarmEase</h1>
                <p class="lead mb-4">Connecting farmers with agricultural processors for efficient post-harvest solutions.</p>
                {% if not user.is_authenticated %}
                    <div class="d-flex gap-3">
                        <a href="{% url 'login' %}" class="btn btn-light btn-lg">Login</a>
                        <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg">Register</a>
                    </div>
                {% endif %}
            </div>
            <div class="col-lg-6">
                <img src="https://placehold.co/600x400" alt="FarmEase" class="img-fluid rounded shadow">
            </div>
        </div>
    </div>
</div>

<!-- Services Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Our Services</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-tractor fa-3x text-primary mb-3"></i>
                        <h3 class="card-title">For Farmers</h3>
                        <p class="card-text">Access a network of verified processors for your agricultural products. Compare prices and book services easily.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-industry fa-3x text-primary mb-3"></i>
                        <h3 class="card-title">For Processors</h3>
                        <p class="card-text">List your processing services and connect with farmers. Manage bookings efficiently.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-handshake fa-3x text-primary mb-3"></i>
                        <h3 class="card-title">Easy Booking</h3>
                        <p class="card-text">Simple and transparent booking system with real-time updates and notifications.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Available Processors Section -->
<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-5">Available Processors</h2>
        <div class="row g-4">
            {% for processor in processors %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h4 class="card-title">{{ processor.business_name }}</h4>
                        <p class="card-text">
                            <i class="fas fa-certificate text-primary"></i> {{ processor.certification }}<br>
                            <i class="fas fa-phone text-primary"></i> {{ processor.contact_number }}<br>
                            <i class="fas fa-map-marker-alt text-primary"></i> {{ processor.address }}
                        </p>
                        <h5 class="mt-3">Services Offered:</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Service</th>
                                        <th>Price/Unit</th>
                                        <th>Min. Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for ps in processor.product_services.all %}
                                    <tr>
                                        <td>{{ ps.product.name }}</td>
                                        <td>{{ ps.service.name }}</td>
                                        <td>Ksh {{ ps.price_per_unit }}</td>
                                        <td>{{ ps.min_amount }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">How It Works</h2>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="text-center">
                    <div class="circle-step mb-3">1</div>
                    <h4>Register</h4>
                    <p>Create an account as a farmer or processor</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center">
                    <div class="circle-step mb-3">2</div>
                    <h4>Browse</h4>
                    <p>Find processors or list your services</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center">
                    <div class="circle-step mb-3">3</div>
                    <h4>Book</h4>
                    <p>Make or receive processing bookings</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center">
                    <div class="circle-step mb-3">4</div>
                    <h4>Track</h4>
                    <p>Monitor your bookings and services</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="bg-primary text-white text-center py-5">
    <div class="container">
        <h2 class="mb-4">Ready to Get Started?</h2>
        {% if not user.is_authenticated %}
            <div class="d-flex justify-content-center gap-3">
                <a href="{% url 'register' %}" class="btn btn-light btn-lg">Register Now</a>
                <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">Login</a>
            </div>
        {% else %}
            <a href="{% url 'farmer_dashboard' %}" class="btn btn-light btn-lg">Go to Dashboard</a>
        {% endif %}
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    .hero {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }
    
    .circle-step {
        width: 60px;
        height: 60px;
        background-color: var(--primary-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        margin: 0 auto;
    }
    
    .card {
        transition: transform 0.2s;
    }
    
    .card:hover {
        transform: translateY(-5px);
    }
</style>
{% endblock %}